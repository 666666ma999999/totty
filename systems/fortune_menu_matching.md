# 占いメニューマッチングシステム

## システム概要
データ収集システムの171項目とRESORT-TI 8次元分析から、ユーザーに最適な占いメニューを自動選択・提案するシステム

## マッチングアルゴリズム

### 基本マッチングロジック
1. **ニーズ親和性分析**: ユーザーの検出ニーズと占いメニューの適合度
2. **RESORT-TI適合度**: 8次元スコアと各占いメニューの重視項目の一致度
3. **データ充実度**: 占い精度に必要なデータの充足度
4. **状況適合性**: 現在の状況・悩みとメニューの関連性

### マッチングスコア算出
```
マッチングスコア = (ニーズ親和性 × 0.3) + (RESORT適合度 × 0.4) + 
                  (データ充実度 × 0.2) + (状況適合性 × 0.1)
```

## 占いメニュー別マッチング条件

### 1. 相手の本音占い
**高マッチング条件**:
- ニーズ: 愚痴・傾聴、感情整理
- RESORT: R値>60, E値>50, Romance値>50
- 必要データ: 対人関係20項目以上

**マッチング重み**: 0.9
**推奨ユーザー**: 人間関係の悩みが深い、相手の気持ちを知りたい

### 2. 恋愛相性診断
**高マッチング条件**:
- ニーズ: 承認欲求、感情整理
- RESORT: Romance値>70, R値>60, S値>40
- 必要データ: 恋愛関係30項目以上

**マッチング重み**: 0.8
**推奨ユーザー**: 特定の相手との相性を知りたい、恋愛関係に積極的

### 3. 恋愛進展タイミング
**高マッチング条件**:
- ニーズ: 励まし、感情整理
- RESORT: T値>65, Romance値>60, I値>50
- 必要データ: 恋愛+時間関連40項目以上

**マッチング重み**: 0.7
**推奨ユーザー**: 恋愛に慎重、適切なタイミングを重視

### 4. 運命の相手探し
**高マッチング条件**:
- ニーズ: 孤独感、励まし
- RESORT: S値>70, Romance値>50, T値>50
- 必要データ: スピリチュアル+価値観25項目以上

**マッチング重み**: 0.8
**推奨ユーザー**: スピリチュアル志向高、運命的な出会いを求める

### 5. 復縁可能性診断
**高マッチング条件**:
- ニーズ: 愚痴・傾聴、励まし
- RESORT: E値変動大, Romance値>60, R値>40
- 必要データ: 過去恋愛経験20項目以上

**マッチング重み**: 0.9
**推奨ユーザー**: 過去の恋愛への執着、復縁への強い願望

### 6. 人間関係修復
**高マッチング条件**:
- ニーズ: 愚痴・傾聴、感情整理
- RESORT: R値<50, E値変動, I値>50
- 必要データ: 人間関係トラブル15項目以上

**マッチング重み**: 0.8
**推奨ユーザー**: 対人関係に深刻な悩み、関係修復を望む

### 7. 総合運勢・人生指針
**高マッチング条件**:
- ニーズ: 励まし、感情整理、承認欲求
- RESORT: 総合値>70, バランス型（全次元50以上）
- 必要データ: 全カテゴリ100項目以上

**マッチング重み**: 0.6
**推奨ユーザー**: 人生全般への関心、総合的なガイダンス希望

## 自動推奨システム

### 推奨ランキング生成
1. **全メニューのマッチングスコア算出**
2. **上位3つのメニューを推奨候補として選出**
3. **ユーザー状況に応じた表現調整**
4. **クリック可能な提案として提示**

### 推奨表示フォーマット
```html
<div class="fortune-suggestions">
  <h3>あなたにおすすめの占い</h3>
  <div class="suggestion-item" data-fortune-type="honesty">
    <h4>🔮 相手の本音占い</h4>
    <p>気になるあの人の本当の気持ちを占います</p>
    <span class="match-score">マッチング度: 92%</span>
  </div>
</div>
```

## 動的マッチング調整

### リアルタイム更新
- **新データ収集時**: マッチングスコア再計算
- **RESORT値変動時**: 推奨順位の調整
- **ニーズ変化時**: 適合度の再評価

### 学習機能
- **選択履歴**: ユーザーの選択パターン学習
- **満足度フィードバック**: 占い結果への反応分析
- **個人化調整**: 個々のユーザーに特化したマッチング

## 特殊マッチング条件

### 緊急度判定
**高緊急度**: 感情分析値-0.7以下、ストレス値90以上
→ 「人間関係修復」「励まし系占い」を優先推奨

**中緊急度**: 不安・迷いキーワード多発
→ 「恋愛進展タイミング」「総合運勢」を推奨

### 時期的考慮
- **恋愛イベント期間**: 恋愛系占いの重み増加
- **年末年始**: 総合運勢の重み増加  
- **ストレス期**: 癒し系占いの重み増加

## 品質保証

### マッチング精度管理
- **最低マッチングスコア**: 0.6以上で推奨
- **データ不足時の対応**: 汎用的占いメニューの提示
- **バランス調整**: 同一メニューの連続推奨回避

### A/Bテスト機能
- **推奨アルゴリズムの比較**
- **マッチング重みの最適化**
- **ユーザー満足度の測定**

## パラメータ設定

### 調整可能要素
- 各要素の重み（ニーズ親和性、RESORT適合度等）
- メニュー別マッチング重み
- 最低推奨スコア閾値
- データ充実度要求水準

### 最適化項目
- マッチング精度の向上
- 推奨多様性の確保
- ユーザー体験の向上
- システム応答速度の最適化